### 关于无法打开网页
* 打开网页报错：`ERR_CONNECTION_REFUSED`，原因可能是： 端口错误或端口未开放或端口被禁，用curl访问，报错：` Connection refused`，
用telnet访问：`telnet ip port`，报错：` Unable to connect to remote host: Connection refused`。可以用netstat查看端口开放情况，参看
[这里](https://serverfault.com/a/725263/267349)
* 在宿主机上访问docker的web服务`curl 127.0.0.1:8000/`，报错：`Connection reset by peer`，用netstat查看宿主机的端口，
发现端口8000处于正常监听状态，说明export port有效；ssh到docker，`curl 127.0.0.1:8000`, 发现服务也可以正常访问。那是什么原因呢？
是因为默认export的是`127.0.0.1:8000`，改为`0.0.0.0:8000`就可以了

### 关于监听socket如何处理多连接
* [这篇值得细看](https://ruslanspivak.com/lsbaws-part3/)
* tuple {10.10.10.2:49152, 12.12.12.3:8888} is a socket pair that uniquely identifies two endpoints of the TCP 
connection on the client and the tuple {12.12.12.3:8888, 10.10.10.2:49152} is a socket pair that uniquely identifies 
the same two endpoints of the TCP connection on the server.
* http server用同一个端口同时和多个客户端通讯，使用fork来处理多连接
* 如果web server是阻塞式的，即一次只能处理一个请求，那么服务被阻塞时，仍然能接受请求，这是因为内核有个一个队列可以缓存请求，队列长度
受参数`REQUEST_QUEUE_SIZE`控制
* 可参考《unix网络编程卷1》4.5节、4.6节

### 关于TCP Socket
* TCP是**没有边界**的字节流协议，因此如果用TCP socket进行通讯，可能需要自定义边界，见《unix网络编程卷1》1.2节
* 每个UDP数据报都有一个长度，见《unix网络编程卷1》2.3节
* [这里](https://stackoverflow.com/a/2862176/2272451)有个不错的论述

### VNC
*  Virtual Network Computing是用于桌面共享的系统，包括server、client和protocol
*  微软的远程桌面访问就是一种VNC
*  TightVNC如果要想通过外网访问局域网内机器，要通过中转服务器
*  不要和VPN搞混

### 反向代理
* 正向代理：web服务器以为你来自A，实际上你来自B，如shadowsocks翻墙
* 反向代理：你以为你访问的是A，实际你访问的是B，如：nginx的反向代理

 ### 内网teamviewer如何通过代理穿透防火墙
 1. 在代理机器(此机IP在白名单上)上启动shadowsocks服务(确保防火墙没有限制shadowsocks服务的端口)
 2. 在内网机器上启动shadowsocks客户端，服务ip和端口设置为上面配置的(teamviewer的连接客户端不需要设置代理)
 3. 实际上代理机器充当了反向代理的角色
 
 ### 单网卡的web服务最能接受超过多少个请求
 * socket由`source_ip:source_port,destination_ip:destination_port`标示（加上协议其实是5元组），见《计算机网络第五版潘爱民》6.5.4节
 * 单个监听端口上可以accept多个客户端连接
 * 如果客户端ip限定，该客户端最多可以和web服务器建立65535个连接(用尽所有端口)
 * 因此唯一的限制是文件描述符的数量
 * 详见[该贴](https://stackoverflow.com/a/2332756/2272451)
 
 ### ICMP
 * ping利用的是ICMP协议
 * ICMP协议属于网络层协议(除了用于数据传输的IP协议外，网络层还有几个辅助控制协议，如ICMP、ARP、DHCP)，不是应用层协议
 * 如果A可以ping通B，B却ping不同A，有可能是A开了防火墙